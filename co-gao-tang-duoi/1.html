<!DOCTYPE html>
<html lang="vi">
<head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>N·ªôi Dung B·∫£o M·∫≠t & Media ƒêa NƒÉng</title> <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
/* === ROOT VARIABLES (Gi·ªØ nguy√™n) === */
:root{--primary:#00f7ff;--secondary:#6e00ff;--accent:#ff00aa;--error:#ff3d71;--success:#00ff88;--warning:#ffcc00;--bg-dark:#0a0a20;--bg-darker:#050510;--bg-light:rgba(20,20,50,.5);--bg-lighter:rgba(30,30,70,.3);--text-light:#e0e0ff;--text-lighter:#fff;--text-dim:rgba(224,224,255,.6);--border-radius:12px;--box-shadow:0 0 30px rgba(0,247,255,.2);--transition:all .4s cubic-bezier(.175,.885,.32,1.275);--iframe-border:rgba(0,247,255,.3);--iframe-bg:rgba(10,10,32,.7);--md-border:rgba(110,0,255,.25);--code-bg:rgba(0,10,30,.8)}
/* === BASE STYLES (Gi·ªØ nguy√™n) === */
*{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background-color:var(--bg-dark);color:var(--text-light);min-height:100vh;overflow-x:hidden;line-height:1.6;position:relative;display:flex;align-items:flex-start;justify-content:center;padding:2rem 1rem}
/* === BACKGROUND EFFECTS (Gi·ªØ nguy√™n) === */
.particles-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;overflow:hidden; pointer-events: none;}
.particle{position:absolute;background:radial-gradient(circle,var(--primary) 0%,transparent 70%);border-radius:50%;opacity:.6;animation:particle-anim linear infinite}
@keyframes particle-anim{0%{transform:translateY(0) rotate(0deg);opacity:0}10%{opacity:.6}100%{transform:translateY(-1500px) rotate(720deg);opacity:0}}
.grid-overlay,.scanlines,.glow-effect{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;pointer-events:none}
.grid-overlay{background-image:linear-gradient(rgba(110,0,255,.05) 1px,transparent 1px),linear-gradient(90deg,rgba(110,0,255,.05) 1px,transparent 1px);background-size:40px 40px}
.scanlines{background:repeating-linear-gradient(0deg,rgba(0,247,255,.03),rgba(0,247,255,.03) 1px,transparent 1px,transparent 3px);animation:scanline 8s linear infinite}
@keyframes scanline{0%{background-position:0 0}100%{background-position:0 100%}}
.glow-effect{background:radial-gradient(circle at center,rgba(0,247,255,.05) 0%,transparent 70%);animation:pulse 8s infinite alternate}
@keyframes pulse{0%{opacity:.3;transform:scale(.95)}100%{opacity:.7;transform:scale(1.05)}}
/* === TARGET PAGE CONTAINER (Gi·ªØ nguy√™n) === */
.container{max-width:1000px; width:100%;margin:2rem auto;padding:2rem 2.5rem 3rem 2.5rem;background:rgba(10,10,32,.9);backdrop-filter:blur(12px);border-radius:var(--border-radius);box-shadow:var(--box-shadow);border:1px solid rgba(110,0,255,.3);position:relative;overflow:visible;transition:var(--transition);animation:floatTarget 7s ease-in-out infinite}
@keyframes floatTarget{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.container::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at center,rgba(0,247,255,.1) 0%,transparent 60%);z-index:-1;animation:pulse 15s infinite alternate}
/* === PASSWORD SECTION (Gi·ªØ nguy√™n) === */
.page-title{text-align:center;color:var(--primary);margin-bottom:2rem;font-weight:300;letter-spacing:2px;text-transform:uppercase;font-size:1.6rem;text-shadow:0 0 15px rgba(0,247,255,.5);position:relative;padding-bottom:1rem;display:flex;align-items:center;justify-content:center;gap:.7rem}.page-title .material-icons{font-size:2rem}.page-title::after{content:'';position:absolute;bottom:0;left:30%;width:40%;height:2px;background:linear-gradient(90deg,transparent,var(--primary),transparent)}
.final-page-password-form{display:flex;flex-direction:column;gap:1.5rem;margin-top:2rem;max-width:400px;margin-left:auto;margin-right:auto}
#final-password-section{transition:opacity .5s ease,transform .5s ease,padding .6s ease,margin .6s ease,visibility 0s linear .6s; /* Lo·∫°i b·ªè max-height kh·ªèi transition */ overflow:hidden;visibility:visible;padding:1rem 0;margin-bottom:2rem; /* max-height:500px; */ /* B·ªè max-height */}
#final-password-section.hiding{opacity:0;transform:scale(.9);pointer-events:none; /* max-height:0; */ /* B·ªè max-height */ padding-top:0;padding-bottom:0;margin-bottom:0;visibility:hidden; transition-delay: 0s !important; /* ƒê·∫£m b·∫£o ·∫©n nhanh */}
.final-page-input-group label{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-light);font-size:.9rem;letter-spacing:1px;text-transform:uppercase}.final-page-input-group label .material-icons{color:var(--secondary);font-size:1.2rem}
.final-page-input-group input[type=password]{width:100%;padding:1rem 1.5rem;background:var(--bg-light);border:1px solid rgba(110,0,255,.5);border-radius:var(--border-radius);color:var(--text-light);font-size:1.1rem;transition:var(--transition);outline:none;letter-spacing:3px;font-family:'Courier New',Courier,monospace}.final-page-input-group input[type=password]:focus{border-color:var(--primary);box-shadow:0 0 15px rgba(0,247,255,.5);transform:translateY(-2px)}
.final-page-button{background:linear-gradient(135deg,var(--secondary),var(--primary));color:#fff;border:none;padding:1rem;border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;transition:var(--transition);box-shadow:0 4px 20px rgba(110,0,255,.4);position:relative;overflow:hidden;display:inline-flex;align-items:center;justify-content:center;gap:.5rem}.final-page-button:hover:not(:disabled){transform:translateY(-3px) scale(1.03);box-shadow:0 6px 25px rgba(0,247,255,.6)}.final-page-button:disabled{filter:grayscale(70%);opacity:.6;cursor:not-allowed;box-shadow:none;transform:none!important}.final-page-button::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(to bottom right,rgba(255,255,255,0) 0%,rgba(255,255,255,.1) 50%,rgba(255,255,255,0) 100%);transform:rotate(45deg);animation:shine 3s infinite linear;opacity:.5; pointer-events: none;}@keyframes shine{0%{transform:translateX(-150%) rotate(45deg)}100%{transform:translateX(150%) rotate(45deg)}}
.final-page-error-message{color:var(--error);text-align:center;margin-top:.5rem;margin-bottom:-.5rem;font-size:.95rem;min-height:2.5rem;font-weight:700;display:flex;align-items:center;justify-content:center;gap:.4rem;opacity:0;transition:opacity .3s ease, max-height 0.3s ease;padding:.5rem .8rem;background:rgba(255,61,113,.1);border-left:3px solid var(--error);border-radius:4px;line-height:1.4;overflow: hidden; max-height: 0;}
.final-page-error-message.show{opacity:1; max-height: 100px;}
.final-page-input-group input[type=password].shake{animation:shake-final .5s cubic-bezier(.36,.07,.19,.97) both;border-color:var(--error)}@keyframes shake-final{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-6px)}20%,40%,60%,80%{transform:translateX(6px)}}
.final-page-donation-prompt{text-align:center;margin-top:1.5rem;padding:.8rem 1rem;background:rgba(255,204,0,.1);border-left:4px solid var(--warning);border-radius:var(--border-radius);color:var(--warning);font-size:.9rem;line-height:1.5;font-style:italic}.final-page-donation-prompt strong{font-weight:700;color:var(--text-lighter)}

/* === CONTENT SECTION (*** S·ª¨A ƒê·ªîI CSS ƒê·ªÇ KH√îNG GI·ªöI H·∫†N HI·ªÇN TH·ªä ***) === */
#final-content-section{
    opacity:0; /* B·∫Øt ƒë·∫ßu ·∫©n */
    visibility:hidden; /* ·∫®n kh·ªèi accessibility tree */
    overflow: hidden; /* ·∫®n n·ªôi dung tr√†n ra khi ƒëang ·∫©n */
    transition: opacity .6s ease-out, visibility 0s linear .6s; /* Ch·ªâ transition opacity v√† visibility */
    position: relative; /* Gi·ªØ position context cho children */
}
#final-content-section.visible{
    opacity:1; /* Hi·ªán */
    visibility:visible; /* Hi·ªán trong accessibility tree */
    overflow: visible; /* Cho ph√©p n·ªôi dung tr√†n ra v√† t·ª± ƒë·ªông gi√£n n·ªü */
    /* KH√îNG C·∫¶N max-height n·ªØa */
    transition: opacity .6s ease-out .2s, visibility 0s linear 0s; /* Transition khi hi·ªán */
}
/* Animation cho n·ªôi dung con b√™n trong (gi·ªØ nguy√™n) */
#final-content-section.visible>*{animation:fadeInChild .7s ease-out forwards;opacity:0}
#final-content-section.visible > #embedded-images-container { animation-delay: .1s; }
#final-content-section.visible > #final-markdown-content { animation-delay: .3s; }
#final-content-section.visible > #embedded-iframes-container { animation-delay: .5s; }
#final-content-section.visible > .footer-note { animation-delay: .7s }
@keyframes fadeInChild{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* === STYLES FOR MULTIPLE MEDIA (C·∫¨P NH·∫¨T CHO LAYOUT ·∫¢NH - Gi·ªØ nguy√™n) === */
#embedded-images-container {
    margin-bottom: 2.5rem;
    display: grid;
    gap: 1.5rem;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}
#embedded-images-container.layout-grid {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}
@media (min-width: 600px) { #embedded-images-container.layout-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); } }
@media (min-width: 900px) { #embedded-images-container.layout-grid { grid-template-columns: repeat(3, 1fr); } }
#embedded-images-container.layout-column {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    align-items: center;
}
#embedded-images-container.layout-column .embedded-image-item {
    width: 100%;
    max-width: 600px;
}
#embedded-images-container.layout-comic {
    display: flex;
    flex-wrap: wrap;
    gap: 0;
    margin-bottom: 2.5rem;
}
#embedded-images-container.layout-comic .embedded-image-item {
    flex: 1 1 auto;
    border: none;
    border-radius: 0;
    box-shadow: none;
    margin: 0;
    overflow: hidden;
    min-width: 50px;
}
#embedded-images-container.layout-comic .embedded-image-item img {
    border-radius: 0;
    cursor: default !important;
    transition: none;
}
#embedded-images-container.layout-comic .embedded-image-item img:hover {
    transform: none;
    filter: none;
    box-shadow: none;
}
.embedded-image-item {
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 247, 255, 0.15);
    border: 1px solid var(--iframe-border);
    position: relative;
    background-color: var(--bg-lighter);
    transition: var(--transition);
}
.embedded-image-item img {
    display: block;
    width: 100%;
    height: auto;
    border-radius: calc(var(--border-radius) - 1px);
    opacity: 0;
    transition: opacity .5s ease-in .1s, transform .3s ease;
    cursor: pointer;
}
.embedded-image-item img.loaded { opacity: 1; }
.embedded-image-item img:hover {
    transform: scale(1.05);
    filter: brightness(1.1);
    box-shadow: 0 5px 15px rgba(0, 247, 255, 0.3);
}
.media-error-message { padding: 1.5rem; text-align: center; color: var(--error); font-size: 1rem; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: .5rem; min-height: 100px; background-color: rgba(255, 61, 113, 0.1); } .media-error-message .material-icons { font-size: 1.5rem; }
#embedded-iframes-container {margin-top: 3rem; display: grid; gap: 2rem; grid-template-columns: 1fr; }
@media (min-width: 900px) {#embedded-iframes-container { grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); }}
.iframe-item-wrapper { border: 1px solid var(--iframe-border); border-radius: var(--border-radius); overflow: hidden; background-color: var(--iframe-bg); box-shadow: 0 10px 30px rgba(0, 247, 255, 0.2); position: relative; width: 100%; padding-top: 56.25%; transition: var(--transition); }
.iframe-item-wrapper:hover { box-shadow: 0 12px 40px rgba(0, 247, 255, 0.35); transform: translateY(-5px); }
.iframe-item-wrapper iframe {position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; border-radius: calc(var(--border-radius) - 1px); }

/* === MARKDOWN STYLES (Gi·ªØ nguy√™n) === */
.final-template-styles{line-height:1.75;color:var(--text-light);max-width:100%;margin-bottom:3rem}.final-template-styles>:first-child{margin-top:0!important}.final-template-styles>:last-child{margin-bottom:0!important}.final-template-styles h1,.final-template-styles h2,.final-template-styles h3,.final-template-styles h4,.final-template-styles h5,.final-template-styles h6{color:var(--primary);margin-top:2rem;margin-bottom:1rem;font-weight:400;letter-spacing:1px;padding-bottom:.6rem;border-bottom:1px solid var(--md-border);position:relative;text-shadow:0 0 8px rgba(0,247,255,.2)}.final-template-styles h1::after,.final-template-styles h2::after{content:'';position:absolute;bottom:-1px;left:0;height:3px;width:80px;background:linear-gradient(90deg,var(--accent),var(--secondary));border-radius:3px;transition:width .4s ease-in-out}.final-template-styles h1:hover::after,.final-template-styles h2:hover::after{width:120px}.final-template-styles h1{font-size:2.1rem;letter-spacing:1.5px}.final-template-styles h2{font-size:1.7rem;color:var(--accent)}.final-template-styles h3{font-size:1.4rem;color:var(--success);border-bottom-style:dashed}.final-template-styles h4{font-size:1.2rem;color:var(--warning);border:none;padding-bottom:0;margin-bottom:.5rem;font-weight:500}.final-template-styles h5,.final-template-styles h6{font-size:1.1rem;color:var(--text-dim);font-weight:600;border:none;padding-bottom:0;margin-bottom:.5rem;text-transform:uppercase}.final-template-styles p{margin-bottom:1.1rem;font-size:1.05rem}.final-template-styles a{color:var(--accent);text-decoration:none;position:relative;padding-bottom:2px;transition:color .3s ease,text-shadow .3s ease;font-weight:600;overflow:hidden;display:inline-block}.final-template-styles a::after{content:'';position:absolute;bottom:-2px;left:0;width:100%;height:2px;background:var(--primary);transform:scaleX(0);transform-origin:left;transition:transform .4s cubic-bezier(.19,1,.22,1)}.final-template-styles a:hover{color:var(--primary);text-shadow:0 0 10px var(--primary)}.final-template-styles a:hover::after{transform:scaleX(1)}.final-template-styles ol,.final-template-styles ul{margin-left:1.5rem;margin-bottom:1.1rem;padding-left:1.8rem;list-style:none}.final-template-styles li{margin-bottom:.6rem;position:relative;padding-left:.5rem}.final-template-styles ul li::before{content:'‚ú®';color:var(--primary);font-weight:400;display:inline-block;width:1em;margin-left:-1.5em;font-size:1.2em;line-height:1;position:absolute;top:.25em;left:0;text-shadow:0 0 6px var(--primary);transition:transform .3s ease}.final-template-styles ul li:hover::before{transform:rotate(90deg) scale(1.2)}.final-template-styles ol{counter-reset:list-counter}.final-template-styles ol li{counter-increment:list-counter}.final-template-styles ol li::before{content:counter(list-counter);color:var(--secondary);font-weight:700;font-size:.85em;font-family:'Georgia',serif;display:inline-flex;align-items:center;justify-content:center;width:1.8em;height:1.8em;margin-left:-1.8em;margin-right:.5em;background-color:rgba(110,0,255,.15);border-radius:50%;border:1px solid var(--secondary);position:absolute;top:.15em;left:0;line-height:1.8em;box-shadow:0 0 5px rgba(110,0,255,.3);transition:background-color .3s ease,transform .3s ease}.final-template-styles ol li:hover::before{background-color:rgba(110,0,255,.4);transform:scale(1.1)}.final-template-styles li p{margin-bottom:.3rem}.final-template-styles blockquote{position:relative;border:none;border-left:6px solid;border-image:linear-gradient(to bottom,var(--secondary),var(--primary)) 1;padding:1.5rem 2rem 1.5rem 3.5rem;margin:2rem 0;background:linear-gradient(135deg,rgba(110,0,255,.08),rgba(110,0,255,.2));border-radius:0 var(--border-radius) var(--border-radius) 0;font-style:italic;font-size:1.1em;color:var(--text-lighter);box-shadow:inset 5px 0 15px -5px rgba(110,0,255,.4);backdrop-filter:blur(2px)}.final-template-styles blockquote::before{content:'format_quote';font-family:'Material Icons';font-size:3rem;color:var(--secondary);opacity:.5;position:absolute;left:.8rem;top:.5rem;transform:translateY(-10%)}.final-template-styles blockquote p{margin-bottom:.6rem;font-size:1em}.final-template-styles blockquote p:last-child{margin-bottom:0}.final-template-styles code:not(pre code){background:rgba(0,247,255,.1);color:var(--primary);padding:.3em .6em;border-radius:5px;font-family:'Fira Code','Consolas',monospace;font-size:.9em;border:1px solid rgba(0,247,255,.3);word-break:break-word;text-shadow:0 0 3px rgba(0,247,255,.5)}.final-template-styles pre{background:var(--code-bg);padding:1.5rem 1.8rem;border-radius:var(--border-radius);overflow-x:auto;margin:2rem 0;border:1px solid var(--secondary);box-shadow:0 0 25px rgba(110,0,255,.25),inset 0 0 15px rgba(0,0,0,.6);position:relative}.final-template-styles pre code{background:0 0;padding:0;font-size:.95em;line-height:1.65;color:var(--text-light);font-family:'Fira Code','Consolas','Monaco',monospace}.final-template-styles pre::-webkit-scrollbar{height:8px;background-color:rgba(0,0,0,.2)}.final-template-styles pre::-webkit-scrollbar-thumb{background:linear-gradient(90deg,var(--secondary),var(--primary));border-radius:4px}.final-template-styles hr{border:0;height:2px;margin:3rem auto;width:70%;background:linear-gradient(90deg,transparent,var(--secondary) 20%,var(--primary) 80%,transparent);opacity:.6}.final-template-styles table{width:100%;border-collapse:separate;border-spacing:0;margin:2rem 0;background:0 0;border:1px solid var(--md-border);border-radius:var(--border-radius);box-shadow:0 8px 25px rgba(0,0,0,.4);overflow:hidden}.final-template-styles td,.final-template-styles th{border-bottom:1px solid var(--md-border);padding:1rem 1.2rem;text-align:left;transition:background-color .3s ease}.final-template-styles td{background-color:rgba(10,10,32,.5)}.final-template-styles tr:last-child td{border-bottom:none}.final-template-styles th{background:linear-gradient(135deg,rgba(110,0,255,.3),rgba(0,247,255,.3));color:var(--text-lighter);font-weight:700;text-transform:uppercase;font-size:.9em;letter-spacing:1px;border-bottom:2px solid var(--primary)}.final-template-styles td:first-child,.final-template-styles th:first-child{padding-left:1.5rem}.final-template-styles td:last-child,.final-template-styles th:last-child{padding-right:1.5rem}.final-template-styles tr:hover td{background-color:var(--bg-lighter);color:var(--text-lighter)}
.final-template-styles img{max-width:100%;height:auto;border-radius:8px;margin:1.5rem 0;box-shadow:0 8px 25px rgba(0,0,0,.4);border:1px solid var(--iframe-border);display:block;background:var(--bg-lighter);transition:transform .3s ease,box-shadow .3s ease,filter .3s ease}.final-template-styles img:hover{transform:scale(1.03);box-shadow:0 12px 40px rgba(0,247,255,.25);filter:brightness(1.1)}

/* === MODAL STYLE (Gi·ªØ nguy√™n) === */
.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(5,5,16,.9);backdrop-filter:blur(10px);z-index:1000;display:flex;justify-content:center;align-items:center;opacity:0;transition:opacity .5s ease;pointer-events:none}.modal-overlay.hidden{display:none!important}.modal-overlay:not(.hidden){opacity:1;pointer-events:auto}
.modal-content{background:var(--bg-dark);border:1px solid var(--secondary);border-radius:var(--border-radius);padding:2.5rem;max-width:600px;width:90%;box-shadow:0 0 50px rgba(110,0,255,.35);position:relative;animation:scaleInModal .5s cubic-bezier(.175,.885,.32,1.275);transform:scale(1)}.modal-overlay:not(.hidden).initial-state .modal-content{transform:scale(.9);opacity:0}@keyframes scaleInModal{from{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}
.modal-title{color:var(--primary);text-align:center;margin-bottom:1.5rem;font-size:1.5rem;text-transform:uppercase;letter-spacing:1px;display:flex;align-items:center;justify-content:center;gap:.5rem}.modal-title .material-icons{font-size:1.8rem; color: var(--primary)}
.modal-message{color:var(--text-light);margin-bottom:2rem;line-height:1.7;font-size:1.1rem;text-align:center}.modal-message p{margin-bottom:1rem}.modal-message strong{color:var(--warning)}
.modal-button{border:none;padding:1rem;border-radius:var(--border-radius);cursor:pointer;font-size:1rem;font-weight:700;width:100%;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:var(--transition)}
#final-warning-confirm { background: linear-gradient(135deg, var(--error), #ff6b8b); color: white; box-shadow: 0 4px 15px rgba(255, 61, 113, 0.4); }
#final-warning-confirm:hover:not(:disabled) { box-shadow: 0 6px 25px rgba(255, 61, 113, 0.6); transform: translateY(-3px) scale(1.03); }
#huan-error-confirm { background: linear-gradient(135deg, var(--warning), #ffd54f); color: var(--bg-darker); box-shadow: 0 4px 15px rgba(255, 204, 0, 0.4); }
#huan-error-confirm:hover:not(:disabled) { box-shadow: 0 6px 25px rgba(255, 204, 0, 0.6); transform: translateY(-3px) scale(1.03); }
/* === MISC & FOOTER (Gi·ªØ nguy√™n) === */
.hidden{display:none!important;visibility:hidden}.text-center{text-align:center}
.footer-note{text-align:center;margin-top:3rem;font-size:.9rem;color:var(--text-dim);opacity:.8;letter-spacing:.5px}.footer-note .material-icons{font-size:1rem;vertical-align:middle;margin-right:.2rem}
.spin{animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}
/* === RESPONSIVE OVERRIDES (Gi·ªØ nguy√™n) === */
@media (max-width:768px){body{padding:1rem}.container{padding:1.5rem;margin:1rem auto}.final-page-password-form{max-width:100%}.page-title{font-size:1.4rem}.final-template-styles h1{font-size:1.8rem}.final-template-styles h2{font-size:1.5rem}.final-template-styles blockquote{padding:1rem 1.5rem 1rem 2.5rem}.final-template-styles blockquote::before{left:.5rem;font-size:2.5rem}.final-template-styles pre{padding:1.2rem}.final-template-styles td,.final-template-styles th{padding:.8rem 1rem}.modal-content{padding:1.5rem;max-width:95%}.modal-title{font-size:1.3rem}.modal-message{font-size:1rem}
    #embedded-images-container { gap: 1rem; margin-bottom: 1.5rem; }
    #embedded-images-container.layout-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
    #embedded-images-container.layout-column { gap: 1rem; }
    #embedded-iframes-container { margin-top: 2rem; gap: 1.5rem; }}
@media (max-width:480px){.final-page-password-form{gap:1.2rem}.final-page-input-group input[type=password]{padding:.8rem 1rem;font-size:1rem}.page-title{font-size:1.3rem}.modal-title{font-size:1.2rem}.modal-message{font-size:.95rem;line-height:1.6}.final-template-styles h1{font-size:1.6rem}.final-template-styles h2{font-size:1.3rem}.final-template-styles h3{font-size:1.2rem}.final-template-styles code:not(pre code){font-size:.85em}.final-template-styles pre code{font-size:.9em}.final-template-styles table{font-size:.9rem}.final-template-styles td,.final-template-styles th{padding:.6rem .8rem}
    #embedded-images-container.layout-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
}
</style>
</head>
<body>
    <div class="particles-container" id="final-particles"></div> <div class="grid-overlay"></div> <div class="scanlines"></div> <div class="glow-effect"></div>
    <div class="container">
        <!-- Password Input Section -->
        <div id="final-password-section">
            <h1 class="page-title"><i class="material-icons">lock_person</i> Truy C·∫≠p N·ªôi Dung</h1>
            <form class="final-page-password-form" id="password-form" onsubmit="checkFinalPagePassword(event); return false;">
                <div class="final-page-input-group">
                    <label for="final-password-input"><i class="material-icons">password</i> M√£ Truy C·∫≠p:</label>
                    <input type="password" id="final-password-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required>
                </div>
                <div class="final-page-donation-prompt">ü§´ Qu√™n m·∫≠t kh·∫©u? ƒê√¥n n·∫øt nh·∫π <strong>10K</strong> v√†o Momo/ZaloPay <strong>0901574726</strong>, nh·∫Øn v·∫•n ƒë·ªÅ v√† t·ªõ s·∫Ω c·ªë g·∫Øng gi√∫p! üòâ</div>
                <button type="submit" class="final-page-button" id="final-submit-btn">
                    <i class="material-icons">sensors</i> Gi·∫£i M√£ & Hi·ªÉn Th·ªã
                </button>
                <div class="final-page-error-message" id="final-error-message"></div>
            </form>
        </div>
        <!-- Content Display Section -->
        <div id="final-content-section">
            <div id="embedded-images-container"></div>
            <div class="final-template-styles" id="final-markdown-content"></div>
            <div id="embedded-iframes-container"></div>
            <div class="footer-note"><i class="material-icons">verified_user</i> An to√†n v·ªõi 10 l·ªõp m√£ h√≥a AES.</div>
        </div>
    </div>
    <!-- Modals (Gi·ªØ nguy√™n) -->
    <div class="modal-overlay hidden initial-state" id="final-warning-modal">
         <div class="modal-content">
             <h2 class="modal-title"><i class="material-icons">gpp_bad</i> C·∫¢NH B√ÅO</h2>
             <div class="modal-message"> <p>Truy c·∫≠p v√†o v√πng d·ªØ li·ªáu m√£ h√≥a cao.</p> <p>M·ªçi h√†nh vi tr√°i ph√©p ƒë·ªÅu c√≥ th·ªÉ b·ªã ghi nh·∫≠n.</p> <p><strong>Lu√¥n b·∫£o m·∫≠t th√¥ng tin!</strong></p> </div>
             <button class="modal-button" id="final-warning-confirm"> <i class="material-icons">check_circle_outline</i> T√îI ƒê√É HI·ªÇU </button>
        </div>
    </div>
    <div class="modal-overlay hidden initial-state" id="huan-error-modal">
         <div class="modal-content">
            <h2 class="modal-title" style="color: var(--warning);"><i class="material-icons">sentiment_very_dissatisfied</i> Sai R·ªìi Fen!</h2>
            <div class="modal-message" style="font-style: italic;"> <p>Sau nay, ch·ªâ c√≥ l√†m ch·ªãu kh√≥ c·∫ßn c√π th√¨ b√π si√™ng nƒÉng,... C√°i lo·∫°i xem ch√πa m√† ƒë√≤i free th√¨ ƒÉn c√°m<br><strong style="font-style:normal;font-weight:bold;font-size:1.1em;">| -_- |</strong></p> </div>
            <button class="modal-button" id="huan-error-confirm"> <i class="material-icons">refresh</i> TH·ª¨ L·∫†I ƒêI </button>
        </div>
    </div>

    <script>
        // === TARGET PAGE SCRIPT (Gi·ªØ nguy√™n logic, CSS ƒë√£ ƒë∆∞·ª£c s·ª≠a) ===
        const encryptedMarkdownContent = `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`;
        const imageLayout = `comic`;
        const embeddedImageUrls = ["https://cdn.discordapp.com/attachments/1290541556733841436/1362724689671360657/0-2.png?ex=68036fc4&is=68021e44&hm=657861f55c05e5374c715e78a2681c3673f02d937771f8d6891be0a907ae1885&","https://cdn.discordapp.com/attachments/1290541556733841436/1362725637483139202/1-7.png?ex=680370a6&is=68021f26&hm=5da3cb847ef32501f2a5a9c3911fed29e8c477da96ac040ae93388beec4b02cc&","https://cdn.discordapp.com/attachments/1290541556733841436/1362724878272172123/2-7.png?ex=68036ff1&is=68021e71&hm=4592be831dc97755d782513cd1451021fc3d6bbac04577ab3aacc3948ede7824&","https://cdn.discordapp.com/attachments/1290541556733841436/1362726391086579782/3-7.png?ex=68037159&is=68021fd9&hm=9906e05496287843766e941c2079aff738f49d68fe9e0a609a1d1f033f50d8b7&","https://cdn.discordapp.com/attachments/1290541556733841436/1362726579784122378/4-7.png?ex=68037186&is=68022006&hm=77c1c1609330dbe85f647ab3ca16f9dca08b4fcfe35e5481036b7e11a8642f82&","https://cdn.discordapp.com/attachments/1290541556733841436/1362726791931887838/5-7.png?ex=680371b9&is=68022039&hm=c8ceab9be1859d509f5b807dbf5110562a248698c1d881f60a97b194fb2ba866&","https://cdn.discordapp.com/attachments/1290541556733841436/1362726957099389038/6-7.png?ex=680371e0&is=68022060&hm=16b54f69cd03bb82bae1cecc2673c3dd365c8e586ba7b181f371057a265b18f8&","https://cdn.discordapp.com/attachments/1290541556733841436/1362727505877794906/7-7.png?ex=68037263&is=680220e3&hm=8906f07298954a740080327cece07b69e7d5956b35e84889200aaf1078c0af8d&","https://cdn.discordapp.com/attachments/1290541556733841436/1362727704939597985/8-7.png?ex=68037293&is=68022113&hm=637c8394f73e5132e598e8d6cae975540938a75efe57962c950a4b524612edf3&","https://cdn.discordapp.com/attachments/1290541556733841436/1362727854789361725/9-8.png?ex=680372b6&is=68022136&hm=5dfa4909497754ae6b42ec855341de30b0084bd7cc98a026abcf00d38e08e42c&","https://cdn.discordapp.com/attachments/1290541556733841436/1362727989040779285/10-8.png?ex=680372d6&is=68022156&hm=97c22e85ca6747ee7fbe1458a77114598a7f8d421d7304875b0bc3024df86253&","https://cdn.discordapp.com/attachments/1290541556733841436/1362728129684312085/11-8.png?ex=680372f8&is=68022178&hm=ffb984bb2af0592d638f5f4e0dc4573ad9f519dadbdfc96ac429b5f34aee5239&","https://cdn.discordapp.com/attachments/1290541556733841436/1362728229420400711/12-8.png?ex=68037310&is=68022190&hm=d39bfdfabd06ba55d7eaed8bc5d0f932b3e09a0e3dc3213770bfd8aadde72313&","https://cdn.discordapp.com/attachments/1290541556733841436/1362728338866835577/13-8.png?ex=6803732a&is=680221aa&hm=fbe9b2aa165137a770b2c235fcda83413e1674fa37d7e6c93f12100c066c4272&","https://cdn.discordapp.com/attachments/1290541556733841436/1362728423377731745/14-8.png?ex=6803733e&is=680221be&hm=3e66987056eedc2ef09b892fa725d44ca29dfc6ddfe7f5adb52c0e06ef8e094c&","https://cdn.discordapp.com/attachments/1290541556733841436/1362728525932527717/15-7.png?ex=68037356&is=680221d6&hm=972e5cb3d0808c606ad4656cf15e623a9d193ef06038efb46a80bd2e3301ab7a&","https://cdn.discordapp.com/attachments/1290541556733841436/1362728633009176698/16-7.png?ex=68037370&is=680221f0&hm=1b3cece1e4343484a3b9dab765b696b6fbe69be0988464232b281c41aed80bab&","https://cdn.discordapp.com/attachments/1290541556733841436/1362728789942997062/17-5.png?ex=68037395&is=68022215&hm=11ccd6e386938aba0262d73d8cfe8bf9b20c17b940ea9277eab4572cfa7170b0&","https://cdn.discordapp.com/attachments/1290541556733841436/1362728914795102348/18-5.png?ex=680373b3&is=68022233&hm=35b0978a7641b50d08cdc2d87edd8ec65bfa6e6cd45be361fd99a20e005b0e37&","https://cdn.discordapp.com/attachments/1290541556733841436/1362729140964429904/19-5.png?ex=680373e9&is=68022269&hm=8af3f937b329adafe2b77271aec18346d3e2b5852ea3d3b03e7333369b3659b9&"];
        const embeddedIframeUrls = [];

        // Elements (Gi·ªØ nguy√™n)
        const finalPasswordSection=document.getElementById('final-password-section');
        const finalContentSection=document.getElementById('final-content-section');
        const finalPasswordInput=document.getElementById('final-password-input');
        const finalErrorMessage=document.getElementById('final-error-message');
        const finalImagesContainer=document.getElementById('embedded-images-container');
        const finalMarkdownContentDiv=document.getElementById('final-markdown-content');
        const finalIframesContainer=document.getElementById('embedded-iframes-container');
        const finalWarningModal=document.getElementById('final-warning-modal');
        const finalWarningConfirmBtn=document.getElementById('final-warning-confirm');
        const huanErrorModal=document.getElementById('huan-error-modal');
        const huanErrorConfirmBtn=document.getElementById('huan-error-confirm');
        const finalParticlesContainer=document.getElementById('final-particles');
        const submitButton=document.getElementById('final-submit-btn');
        let errorTimeout = null;

        // Particles Function (Gi·ªØ nguy√™n)
        function createFinalParticles(){if(!finalParticlesContainer||finalParticlesContainer.children.length>40&&Math.random()<.9)return;finalParticlesContainer.innerHTML='';const n=window.innerWidth>768?120:60;for(let i=0;i<n;i++){const p=document.createElement('div');p.classList.add('particle');const s=Math.random()*4+1;const x=Math.random()*window.innerWidth;const d=Math.random()*12;const u=Math.random()*18+12;const o=Math.random()*.4+.1;Object.assign(p.style,{width:`${s}px`,height:`${s}px`,left:`${x}px`,bottom:`-${s}px`,animationDuration:`${u}s`,animationDelay:`${d}s`,opacity:o});const c=['#00f7ff','#6e00ff','#ff00aa'][Math.floor(Math.random()*3)];p.style.background=`radial-gradient(circle, ${c} 0%, transparent 70%)`;finalParticlesContainer.appendChild(p)}}

        /**
         * Decryption Function (REVISED SIMPLIFIED - Gi·ªØ nguy√™n)
         */
        function multiLayerDecrypt(encryptedBase64Data, password, layers = 10) {
            if (typeof CryptoJS === 'undefined') throw new Error("L·ªói: Kh√¥ng t√¨m th·∫•y CryptoJS.");
            let currentData = encryptedBase64Data;
            try {
                for (let i = layers - 1; i >= 0; i--) {
                    const layerKey = password + i;
                    let decryptedBytes;
                    try { decryptedBytes = CryptoJS.AES.decrypt(currentData, layerKey); }
                    catch (decryptError) { throw new Error('decrypt-fail'); }

                    let decryptedUtf8;
                    try { decryptedUtf8 = decryptedBytes.toString(CryptoJS.enc.Utf8); }
                    catch (utf8Error) { throw new Error('decrypt-fail'); }

                    if (!decryptedUtf8 && i > 0) {
                         throw new Error('decrypt-fail');
                     }
                     if (!decryptedUtf8 && i === 0 && encryptedBase64Data !== "") {
                         // T·∫°m ch·∫•p nh·∫≠n k·∫øt qu·∫£ r·ªóng n·∫øu l·ªõp cu·ªëi
                     }

                    if (decryptedUtf8) {
                        const parts = decryptedUtf8.split("|");
                        if (parts.length < 3 || parts[parts.length - 2] !== password || parseInt(parts[parts.length - 1], 10) !== i) {
                            throw new Error('decrypt-fail');
                        }
                        currentData = parts.slice(0, parts.length - 2).join('|');
                    } else {
                        currentData = "";
                    }
                }
                return currentData;
            } catch (e) {
                 if (e.message !== 'decrypt-fail') { console.error("L·ªói gi·∫£i m√£ kh√¥ng mong mu·ªën:", e); }
                throw new Error('decrypt-fail');
            }
        }

        // Error Display Functions (Gi·ªØ nguy√™n)
        function showInlineError(message){ clearTimeout(errorTimeout); finalErrorMessage.innerHTML = `<i class="material-icons">error</i> ${message||'L·ªói kh√¥ng x√°c ƒë·ªãnh'}`; finalErrorMessage.classList.add('show'); finalPasswordInput.classList.add('shake'); setTimeout(()=> finalPasswordInput.classList.remove('shake'), 500); errorTimeout = setTimeout(() => { finalErrorMessage.classList.remove('show'); }, 3500); }
        function showHuanModal() { if(!huanErrorModal) return; huanErrorModal.classList.add('initial-state'); huanErrorModal.classList.remove('hidden'); requestAnimationFrame(()=>{huanErrorModal.classList.remove('initial-state')}); }
        function isValidUrl(string) { if (!string) return false; try { new URL(string); return string.startsWith('http:') || string.startsWith('https:') || string.startsWith('data:'); } catch (_) { return false; } }

        // Password Check & Content Display (Gi·ªØ nguy√™n logic)
        function checkFinalPagePassword(event){
            if(event)event.preventDefault();const enteredPassword=finalPasswordInput.value.trim();
            finalErrorMessage.classList.remove('show');
            finalPasswordInput.classList.remove('shake');
            clearTimeout(errorTimeout);

            if(!enteredPassword){showInlineError('Ch∆∞a nh·∫≠p m√£ m√† fen!');finalPasswordInput.focus();return}
            submitButton.disabled=true;submitButton.innerHTML='<i class="material-icons spin">hourglass_top</i> Check pass...';

            setTimeout(()=>{
                try{
                    const decryptedHtml = multiLayerDecrypt(encryptedMarkdownContent, enteredPassword, 10);

                    // --- Render ·∫¢nh ---
                    finalImagesContainer.innerHTML = '';
                    finalImagesContainer.className = 'layout-' + imageLayout;

                    if (Array.isArray(embeddedImageUrls) && embeddedImageUrls.length > 0) {
                         embeddedImageUrls.forEach(imageUrl => {
                            if(isValidUrl(imageUrl)) {
                                const imgItem = document.createElement('div'); imgItem.className = 'embedded-image-item';
                                const img = document.createElement('img'); img.alt = "·∫¢nh nh√∫ng"; img.loading = "lazy";
                                img.onerror = () => { imgItem.innerHTML = '<div class="media-error-message"><i class="material-icons">broken_image</i> ·∫¢nh l·ªói</div>'; img.classList.add('loaded'); };
                                img.onload = () => { img.classList.add('loaded'); };
                                img.src = imageUrl;
                                if (imageLayout !== 'comic') {
                                    img.onclick = () => window.open(imageUrl, '_blank');
                                }
                                imgItem.appendChild(img); finalImagesContainer.appendChild(imgItem);
                             } else { console.warn("Invalid image URL skipped:", imageUrl); const errorItem = document.createElement('div'); errorItem.className = 'embedded-image-item'; errorItem.innerHTML = '<div class="media-error-message"><i class="material-icons">link_off</i>Link ·∫£nh sai</div>'; finalImagesContainer.appendChild(errorItem); }
                        });
                    }

                    // Render Markdown Content
                    finalMarkdownContentDiv.innerHTML = decryptedHtml;

                    // --- Render Iframes ---
                    finalIframesContainer.innerHTML = '';
                    if (Array.isArray(embeddedIframeUrls) && embeddedIframeUrls.length > 0) {
                         embeddedIframeUrls.forEach(iframeUrl => {
                             if(isValidUrl(iframeUrl)) {
                                const iframeWrapper = document.createElement('div'); iframeWrapper.className = 'iframe-item-wrapper';
                                const iframe = document.createElement('iframe'); iframe.title = "N·ªôi dung nh√∫ng"; iframe.frameborder = "0"; iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"; iframe.allowfullscreen = true; iframe.loading = "lazy";
                                iframe.onerror = () => { iframeWrapper.innerHTML = '<div class="media-error-message"><i class="material-icons">video_stable</i>L·ªói iframe</div>'; };
                                iframeWrapper.appendChild(iframe); finalIframesContainer.appendChild(iframeWrapper);
                                setTimeout(() => { iframe.src = iframeUrl; }, 50);
                            } else { console.warn("Invalid iframe URL skipped:", iframeUrl); const errorWrapper = document.createElement('div'); errorWrapper.className = 'iframe-item-wrapper'; errorWrapper.style.cssText = 'padding-top: 0; min-height: 100px;'; errorWrapper.innerHTML = '<div class="media-error-message"><i class="material-icons">link_off</i>Link iframe sai</div>'; finalIframesContainer.appendChild(errorWrapper); }
                        });
                    } else { finalMarkdownContentDiv.style.marginBottom='0'; }

                    // --- Show Content ---
                    finalPasswordSection.classList.add('hiding');
                    finalContentSection.classList.add('visible'); // Trigger transition (ch·ªâ opacity/visibility)
                    setTimeout(()=>{ const focusTarget = finalMarkdownContentDiv.querySelector('h1, h2, h3, h4, h5, h6') || finalImagesContainer || finalIframesContainer || finalContentSection; if(focusTarget && typeof focusTarget.focus === 'function') { focusTarget.setAttribute('tabindex', '-1'); focusTarget.focus({preventScroll:true}); window.scrollTo({ top: finalContentSection.offsetTop - 20, behavior: 'smooth' }); } }, 700);

                } catch(e) { // Handle Decryption Errors
                     if (e.message === 'decrypt-fail') { showHuanModal(); }
                     else { showInlineError(e.message || "L·ªói x·ª≠ l√Ω kh√¥ng x√°c ƒë·ªãnh."); }
                     finalPasswordInput.value = '';
                     finalPasswordSection.classList.remove('hiding');
                     finalContentSection.classList.remove('visible'); // Hide content again
                     finalImagesContainer.innerHTML = ''; finalImagesContainer.className = '';
                     finalIframesContainer.innerHTML = '';
                     finalMarkdownContentDiv.innerHTML = '';
                 } finally {
                     submitButton.disabled = false;
                     submitButton.innerHTML='<i class="material-icons">sensors</i> Gi·∫£i M√£ & Hi·ªÉn Th·ªã';
                 }
            }, 150);
        }

        // Initialization (Gi·ªØ nguy√™n)
        document.addEventListener('DOMContentLoaded',()=>{ createFinalParticles(); finalContentSection.setAttribute('tabindex','-1'); if(finalWarningModal&&finalWarningConfirmBtn){ finalWarningModal.classList.remove('hidden','initial-state'); const wCH = ()=>{ finalWarningModal.classList.add('hidden'); setTimeout(()=>finalPasswordInput.focus(), 100); }; finalWarningConfirmBtn.onclick=wCH; finalWarningModal.onclick=(e)=>{if(e.target===finalWarningModal) wCH(); }; }else{ setTimeout(() => finalPasswordInput.focus(), 100); } if(huanErrorModal&&huanErrorConfirmBtn){ const hCH=()=>{ huanErrorModal.classList.add('hidden'); setTimeout(()=> finalPasswordInput.focus(), 100); }; huanErrorConfirmBtn.onclick=hCH; huanErrorModal.onclick=(e)=>{ if(e.target===huanErrorModal) hCH(); }; } finalPasswordInput.addEventListener('keydown',(e)=>{ if(e.key === 'Enter') { checkFinalPagePassword(e); } }); });
        let finalResizeTimeout; window.addEventListener('resize',()=>{clearTimeout(finalResizeTimeout);finalResizeTimeout=setTimeout(createFinalParticles,300)});

    </script>
</body>
</html>
